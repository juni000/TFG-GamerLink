<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!-- Navbar -->
<nav th:fragment="navbar(user)" class="navbar navbar-expand-lg navbar-dark shadow-sm">
	<div class="container">
		<a class="navbar-brand fw-bold" href="/home">
			<i class="fas fa-gamepad me-2 text-gamer-green"></i>GamerLink
		</a>

		<!-- Botones de Chat -->
		<div class="d-flex me-auto ms-3">
			<div class="position-relative me-3">
				<a href="#" class="btn btn-outline-light position-relative" title="Chat Global">
					<i class="fas fa-globe me-1"></i> Global
					<span class="chat-badge badge bg-danger rounded-pill">3</span>
				</a>
			</div>
			<div class="position-relative me-3">
				<a href="/chat/recentchats" class="btn btn-outline-light position-relative" title="Chats Recientes">
					<i class="fas fa-comment-alt me-1"></i> Chats
					<span class="chat-badge badge bg-danger rounded-pill" th:text="${numberChats}">0</span>
				</a>
			</div>
			<div class="position-relative">
				<a href="/friends" class="btn btn-outline-light position-relative" title="Chat con Amigos">
					<i class="fas fa-user-friends me-1"></i> Amigos
					<span class="chat-badge badge bg-danger rounded-pill" th:text="${friends.size()}">0</span>
				</a>
			</div>
		</div>

		<!-- Perfil de Usuario -->
		<div class="d-flex align-items-center">
			<div class="dropdown">
				<button class="btn btn-outline-light dropdown-toggle d-flex align-items-center" type="button"
					id="userDropdown" data-bs-toggle="dropdown">
					<i class="fas fa-user-circle me-2"></i> <span th:text="${user.userName}">Usuario</span>
				</button>
				<ul class="dropdown-menu dropdown-menu-end">
					<li><a class="dropdown-item" th:href="@{/admin/users}"
							th:if="${#authentication.principal.authorities.?[authority == 'ROLE_ADMIN'].size() > 0}">
							<i class="fas fa-users-cog me-2"></i>Admin Panel</a>
					</li>
					<li><a class="dropdown-item" href="/profile/edit"><i class="fas fa-user me-2"></i>Perfil</a></li>
					<li>
						<hr class="dropdown-divider">
					</li>
					<li><a class="dropdown-item text-danger" th:href="@{/auth/logout}"><i
								class="fas fa-sign-out-alt me-2"></i>Cerrar
							sesi√≥n</a></li>
				</ul>
			</div>
		</div>
	</div>
</nav>
</body>
</html>